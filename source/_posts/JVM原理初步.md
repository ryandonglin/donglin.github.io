---
title: JVM原理初步
date: 2018-01-10 17:00:39
tags: 
  - 虚拟机
  - 初识
categories:
  - Java
---

### 简介
JVM(Java Virtual Machine,Java虚拟机）对于目前从事java开发的每一个程序员来说，似乎是永远躲不掉的坎儿：Web应用程序运行变慢了，身边肯定会有人说你看下gc，看看是不是gc导致程序运行变慢的；面试中看到你写了懂JVM，面试官也会揪着这个死缠乱打；了解SolrCloud、Elasticsearch这类基于lucene的开源搜索组件时，了解JVM会对这些系统的调优有很大的帮助。了解JVM，去阅读一手的英文doc肯定是最佳的方式，除了官方doc，关于jvm的博客在搜索引擎上也大把大把的存在。但中文博客的前篇一律，让我们在提取真正需要的信息时会有界限。我们想结合现在中文博客、《深入了解Java虚拟机》以及官方doc，在未来的一系列文章中，由浅入深，解密jvm中的原理。

### JVM组成
了解java虚拟机，首先需要了解下JVM虚拟机所管理的内存的构成：程序计数器、本地方法栈、栈、JAVA堆、方法区。
![]()

*程序计数器*：程序计数器是一块较小的内存空间，可以看做是当前线程所执行的字节码的行号指示器，程序的分支、循环、跳转、异常处理、线程恢复等基础功能都需要程序计数器完成；
*虚拟机栈*：生命周期与线程相同，虚拟机栈描述的是Java方法执行的内存模型--每个方法在执行的同时都会创建一个栈帧，用于存储局部变量表、操作数栈、动态链接、方法出口等信息。
> 这里对于虚拟机栈进一步说明一下：
> 1. 局部变量表： 局部变量表是一组变量值存储空间，用于存放方法参数和方法内部定义的局部变量。虚拟机栈帧中，局部变量表中变量的作用域是当前调用的函数，如果被调用函数的局部变量越多，会使局部变量表膨胀，因此导致函数调用会占用更多的栈空间，如果此时栈空间设置的过少，会抛出StackOverFlow异常。
>   
> 
> 活动线程中，只有栈顶的栈帧是有效的，称为当前栈帧，这个栈帧所关联的方法称为当前方法。执行引擎所运行的所有字节码指令都只针对当前栈帧进行操作。